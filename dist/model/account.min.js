module.factory("Account",function(Planet){var Account;return Account=function(plasmaLevel,geologist,planets){return null==plasmaLevel&&(plasmaLevel=0),null==geologist&&(geologist=!1),null==planets&&(planets=[]),this.plasmaLevel=plasmaLevel,this.geologist=geologist,this.planets=planets,null},Account.prototype.addPlanet=function(planet){return this.planets.push(planet),null},Account.prototype.removePlanet=function(index){return this.planets.splice(index,1),null},Account.prototype.movePlanet=function(startPos,finalPos){var auxPlanet;return auxPlanet=this.planets[startPos],this.removePlanet(startPos),this.planets.splice(finalPos,0,auxPlanet)},Account.prototype.getMetalProduction=function(){var i,len,planet,production,ref;for(production=0,ref=this.planets,i=0,len=ref.length;len>i;i++)planet=ref[i],production+=planet.getMetalProduction(this.plasmaLevel,this.geologist);return production},Account.prototype.getCrystalProduction=function(){var i,len,planet,production,ref;for(production=0,ref=this.planets,i=0,len=ref.length;len>i;i++)planet=ref[i],production+=planet.getCrystalProduction(this.plasmaLevel,this.geologist);return production},Account.prototype.getDeuteriumProduction=function(){var i,len,planet,production,ref;for(production=0,ref=this.planets,i=0,len=ref.length;len>i;i++)planet=ref[i],production+=planet.getDeuteriumProduction(this.plasmaLevel,this.geologist);return production},Account.prototype.productionCapacity=function(unit,player,period){var cProductionCapacity,dProductionCapacity,mProductionCapacity;return period=function(){switch(period){case"hourly":return 1;case"daily":return 24;case"weekly":return 168}}(),mProductionCapacity=Math.floor(this.getMetalProduction()*period/unit.metalCost),cProductionCapacity=Math.floor(this.getCrystalProduction()*period/unit.crystalCost),dProductionCapacity=0===unit.deuteriumCost?1/0:Math.floor(this.getDeuteriumProduction()*period/unit.deuteriumCost),Math.min(mProductionCapacity,cProductionCapacity,dProductionCapacity)},Account.getFromTemplate=function(templ){var account,planet;return null!=templ?(account=new Account(templ.plasmaLevel,templ.geologist,null!=templ.planets?function(){var i,len,ref,results;for(ref=templ.planets,results=[],i=0,len=ref.length;len>i;i++)planet=ref[i],results.push(Planet.getFromTemplate(planet));return results}():void 0),out.success("Data loaded successfully")):(account=new Account,out.error("Incorrect data input")),account},Account});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsL2FjY291bnQuY29mZmVlIiwibW9kZWwvYWNjb3VudC5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJmYWN0b3J5IiwiUGxhbmV0IiwiQWNjb3VudCIsInBsYXNtYUxldmVsIiwiZ2VvbG9naXN0IiwicGxhbmV0cyIsInRoaXMiLCJwcm90b3R5cGUiLCJhZGRQbGFuZXQiLCJwbGFuZXQiLCJwdXNoIiwicmVtb3ZlUGxhbmV0IiwiaW5kZXgiLCJzcGxpY2UiLCJtb3ZlUGxhbmV0Iiwic3RhcnRQb3MiLCJmaW5hbFBvcyIsImF1eFBsYW5ldCIsImdldE1ldGFsUHJvZHVjdGlvbiIsImkiLCJsZW4iLCJwcm9kdWN0aW9uIiwicmVmIiwibGVuZ3RoIiwiZ2V0Q3J5c3RhbFByb2R1Y3Rpb24iLCJnZXREZXV0ZXJpdW1Qcm9kdWN0aW9uIiwicHJvZHVjdGlvbkNhcGFjaXR5IiwidW5pdCIsInBsYXllciIsInBlcmlvZCIsImNQcm9kdWN0aW9uQ2FwYWNpdHkiLCJkUHJvZHVjdGlvbkNhcGFjaXR5IiwibVByb2R1Y3Rpb25DYXBhY2l0eSIsIk1hdGgiLCJmbG9vciIsIm1ldGFsQ29zdCIsImNyeXN0YWxDb3N0IiwiZGV1dGVyaXVtQ29zdCIsIkluZmluaXR5IiwibWluIiwiZ2V0RnJvbVRlbXBsYXRlIiwidGVtcGwiLCJhY2NvdW50IiwicmVzdWx0cyIsIm91dCIsInN1Y2Nlc3MiLCJlcnJvciJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU9DLFFBQVEsVUFBVyxTQUFDQyxRQUV6QixHQUFBQyxRQW9FQSxPQXBFQUEsU0FBVSxTQUFDQyxZQUFpQkMsVUFBbUJDLFNDYTdDLE1BWm1CLE9BQWZGLGNEREtBLFlBQWMsR0NJTixNQUFiQyxZREpzQkEsV0FBWSxHQ092QixNQUFYQyxVRFB5Q0EsWUFDN0NDLEtBQUNILFlBQWNBLFlBQ2ZHLEtBQUNGLFVBQVlBLFVBQ2JFLEtBQUNELFFBQVVBLFFBQ1gsTUFFRkgsUUFBUUssVUFBVUMsVUFBWSxTQUFDQyxRQ1c3QixNRFZBSCxNQUFDRCxRQUFRSyxLQUFLRCxRQUNkLE1BRUZQLFFBQVFLLFVBQVVJLGFBQWUsU0FBQ0MsT0NXaEMsTURWQU4sTUFBQ0QsUUFBUVEsT0FBT0QsTUFBTyxHQUN2QixNQUVGVixRQUFRSyxVQUFVTyxXQUFhLFNBQUNDLFNBQVVDLFVBQ3hDLEdBQUFDLFVDWUEsT0RaQUEsV0FBWVgsS0FBQ0QsUUFBUVUsVUFDckJULEtBQUNLLGFBQWFJLFVBQ2RULEtBQUNELFFBQVFRLE9BQU9HLFNBQVUsRUFBR0MsWUFFL0JmLFFBQVFLLFVBQVVXLG1CQUFxQixXQUNyQyxHQUFBQyxHQUFBQyxJQUFBWCxPQUFBWSxXQUFBQyxHQUNBLEtBREFELFdBQWEsRUFDYkMsSUFBQWhCLEtBQUFELFFBQUFjLEVBQUEsRUFBQUMsSUFBQUUsSUFBQUMsT0FBQUgsSUFBQUQsRUFBQUEsSUNhRVYsT0FBU2EsSUFBSUgsR0RaYkUsWUFBY1osT0FBT1MsbUJBQW1CWixLQUFDSCxZQUFhRyxLQUFDRixVQ2V6RCxPRGRBaUIsYUFFRm5CLFFBQVFLLFVBQVVpQixxQkFBdUIsV0FDdkMsR0FBQUwsR0FBQUMsSUFBQVgsT0FBQVksV0FBQUMsR0FDQSxLQURBRCxXQUFhLEVBQ2JDLElBQUFoQixLQUFBRCxRQUFBYyxFQUFBLEVBQUFDLElBQUFFLElBQUFDLE9BQUFILElBQUFELEVBQUFBLElDaUJFVixPQUFTYSxJQUFJSCxHRGhCYkUsWUFBY1osT0FBT2UscUJBQXFCbEIsS0FBQ0gsWUFBYUcsS0FBQ0YsVUNtQjNELE9EbEJBaUIsYUFFRm5CLFFBQVFLLFVBQVVrQix1QkFBeUIsV0FDekMsR0FBQU4sR0FBQUMsSUFBQVgsT0FBQVksV0FBQUMsR0FDQSxLQURBRCxXQUFhLEVBQ2JDLElBQUFoQixLQUFBRCxRQUFBYyxFQUFBLEVBQUFDLElBQUFFLElBQUFDLE9BQUFILElBQUFELEVBQUFBLElDcUJFVixPQUFTYSxJQUFJSCxHRHBCYkUsWUFBY1osT0FBT2dCLHVCQUF1Qm5CLEtBQUNILFlBQWFHLEtBQUNGLFVDdUI3RCxPRHRCQWlCLGFBRUZuQixRQUFRSyxVQUFVbUIsbUJBQXFCLFNBQUNDLEtBQU1DLE9BQVFDLFFBQ3BELEdBQUFDLHFCQUFBQyxvQkFBQUMsbUJDb0NBLE9EcENBSCxRQUFBLFdBQVMsT0FBUUEsUUFBUixJQUNGLFNDeUJELE1EekJlLEVBRFosS0FFRixRQzBCRCxNRDFCYyxHQUZYLEtBR0YsU0MyQkQsTUQzQmUsU0FDckJHLG9CQUFBQyxLQUFBQyxNQUFzQjVCLEtBQUNZLHFCQUF1QlcsT0FBVUYsS0FBS1EsV0FDN0RMLG9CQUFBRyxLQUFBQyxNQUFzQjVCLEtBQUNrQix1QkFBeUJLLE9BQVVGLEtBQUtTLGFBSS9ETCxvQkFDMkIsSUFBdEJKLEtBQUtVLGNBQXdCQyxFQUFBQSxFQUFoQ0wsS0FBQUMsTUFDSzVCLEtBQUNtQix5QkFBMkJJLE9BQVVGLEtBQUtVLGVBQ2xESixLQUFLTSxJQUFJUCxvQkFBcUJGLG9CQUFxQkMsc0JBR3JEN0IsUUFBUXNDLGdCQUFrQixTQUFDQyxPQUN6QixHQUFBQyxTQUFBakMsTUMwQ0EsT0QxQ0csT0FBQWdDLE9BQ0RDLFFBQWMsR0FBQXhDLFNBQ1p1QyxNQUFNdEMsWUFDTnNDLE1BQU1yQyxVQUNILE1BQUFxQyxNQUFBcEMsUUFBSCxXQ3dCQSxHQUFJYyxHQUFHQyxJQUFLRSxJQUFLcUIsT0FHakIsS0QxQkdyQixJQUFBbUIsTUFBQXBDLFFBQUFzQyxXQUFBeEIsRUFBQSxFQUFBQyxJQUFBRSxJQUFBQyxPQUFBSCxJQUFBRCxFQUFBQSxJQzJCRFYsT0FBU2EsSUFBSUgsR0QzQlp3QixRQUFBakMsS0FBQVQsT0FBT3VDLGdCQUFnQi9CLFFDOEIxQixPQUFPa0MsWUQ3QkYsUUFFUEMsSUFBSUMsUUFBUSw4QkFFWkgsUUFBYyxHQUFBeEMsU0FDZDBDLElBQUlFLE1BQU0seUJBQ1pKLFNBRUt4QyIsImZpbGUiOiJtb2RlbC9hY2NvdW50Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5mYWN0b3J5ICdBY2NvdW50JywgKFBsYW5ldCkgLT5cclxuXHJcbiAgQWNjb3VudCA9IChwbGFzbWFMZXZlbCA9IDAsIGdlb2xvZ2lzdCA9IGZhbHNlLCBwbGFuZXRzID0gW10pIC0+XHJcbiAgICBAcGxhc21hTGV2ZWwgPSBwbGFzbWFMZXZlbFxyXG4gICAgQGdlb2xvZ2lzdCA9IGdlb2xvZ2lzdFxyXG4gICAgQHBsYW5ldHMgPSBwbGFuZXRzICMgVGhpcyBpcyBub3Qgc2FmZSFcclxuICAgIG51bGxcclxuXHJcbiAgQWNjb3VudC5wcm90b3R5cGUuYWRkUGxhbmV0ID0gKHBsYW5ldCkgLT5cclxuICAgIEBwbGFuZXRzLnB1c2gocGxhbmV0KVxyXG4gICAgbnVsbFxyXG5cclxuICBBY2NvdW50LnByb3RvdHlwZS5yZW1vdmVQbGFuZXQgPSAoaW5kZXgpIC0+XHJcbiAgICBAcGxhbmV0cy5zcGxpY2UoaW5kZXgsIDEpXHJcbiAgICBudWxsXHJcblxyXG4gIEFjY291bnQucHJvdG90eXBlLm1vdmVQbGFuZXQgPSAoc3RhcnRQb3MsIGZpbmFsUG9zKSAtPlxyXG4gICAgYXV4UGxhbmV0ID0gQHBsYW5ldHNbc3RhcnRQb3NdXHJcbiAgICBAcmVtb3ZlUGxhbmV0KHN0YXJ0UG9zKVxyXG4gICAgQHBsYW5ldHMuc3BsaWNlKGZpbmFsUG9zLCAwLCBhdXhQbGFuZXQpXHJcblxyXG4gIEFjY291bnQucHJvdG90eXBlLmdldE1ldGFsUHJvZHVjdGlvbiA9IC0+XHJcbiAgICBwcm9kdWN0aW9uID0gMFxyXG4gICAgZm9yIHBsYW5ldCBpbiBAcGxhbmV0c1xyXG4gICAgICBwcm9kdWN0aW9uICs9IHBsYW5ldC5nZXRNZXRhbFByb2R1Y3Rpb24oQHBsYXNtYUxldmVsLCBAZ2VvbG9naXN0KVxyXG4gICAgcHJvZHVjdGlvblxyXG5cclxuICBBY2NvdW50LnByb3RvdHlwZS5nZXRDcnlzdGFsUHJvZHVjdGlvbiA9IC0+XHJcbiAgICBwcm9kdWN0aW9uID0gMFxyXG4gICAgZm9yIHBsYW5ldCBpbiBAcGxhbmV0c1xyXG4gICAgICBwcm9kdWN0aW9uICs9IHBsYW5ldC5nZXRDcnlzdGFsUHJvZHVjdGlvbihAcGxhc21hTGV2ZWwsIEBnZW9sb2dpc3QpXHJcbiAgICBwcm9kdWN0aW9uXHJcblxyXG4gIEFjY291bnQucHJvdG90eXBlLmdldERldXRlcml1bVByb2R1Y3Rpb24gPSAtPlxyXG4gICAgcHJvZHVjdGlvbiA9IDBcclxuICAgIGZvciBwbGFuZXQgaW4gQHBsYW5ldHNcclxuICAgICAgcHJvZHVjdGlvbiArPSBwbGFuZXQuZ2V0RGV1dGVyaXVtUHJvZHVjdGlvbihAcGxhc21hTGV2ZWwsIEBnZW9sb2dpc3QpXHJcbiAgICBwcm9kdWN0aW9uXHJcblxyXG4gIEFjY291bnQucHJvdG90eXBlLnByb2R1Y3Rpb25DYXBhY2l0eSA9ICh1bml0LCBwbGF5ZXIsIHBlcmlvZCkgLT5cclxuICAgIHBlcmlvZCA9IHN3aXRjaCAocGVyaW9kKVxyXG4gICAgICB3aGVuICdob3VybHknIHRoZW4gMVxyXG4gICAgICB3aGVuICdkYWlseScgdGhlbiAyNFxyXG4gICAgICB3aGVuICd3ZWVrbHknIHRoZW4gMTY4ICMgN2RheXMgKiAyNCBob3Vyc1xyXG4gICAgbVByb2R1Y3Rpb25DYXBhY2l0eSA9IEBnZXRNZXRhbFByb2R1Y3Rpb24oKSAqIHBlcmlvZCAvLyB1bml0Lm1ldGFsQ29zdFxyXG4gICAgY1Byb2R1Y3Rpb25DYXBhY2l0eSA9IEBnZXRDcnlzdGFsUHJvZHVjdGlvbigpICogcGVyaW9kIC8vIHVuaXQuY3J5c3RhbENvc3RcclxuICAgICMgU2luY2UgZGV1dGVyaXVtUHJvZHVjdGlvbiBjYW4gYmUgMCBhbmQgdW5pdC5kZXV0ZXJpdW1Db3N0IGNhbiBhbHNvIGJlIDAsXHJcbiAgICAjIHdlIG11c3QgYXZvaWQgZGV1dGVyaXVtUHJvZHVjdGlvbi91bml0LmRldXRlcml1bUNvc3Qgd2hlbiBib3RoIGFyZSBlcXVhbFxyXG4gICAgIyB0byAwLCBvdGhlcndpc2UgTmFOIHdpbGwgYmUgcmV0dXJuZWRcclxuICAgIGRQcm9kdWN0aW9uQ2FwYWNpdHkgPVxyXG4gICAgICBpZiB1bml0LmRldXRlcml1bUNvc3QgaXMgMCB0aGVuIEluZmluaXR5ICMgUmVnYXJkbGVzcyBwcm9kdWN0aW9uXHJcbiAgICAgIGVsc2UgQGdldERldXRlcml1bVByb2R1Y3Rpb24oKSAqIHBlcmlvZCAvLyB1bml0LmRldXRlcml1bUNvc3RcclxuICAgIE1hdGgubWluKG1Qcm9kdWN0aW9uQ2FwYWNpdHksIGNQcm9kdWN0aW9uQ2FwYWNpdHksIGRQcm9kdWN0aW9uQ2FwYWNpdHkpXHJcblxyXG4gICMjIyBTVEFUSUMgTUVUSE9EICMjI1xyXG4gIEFjY291bnQuZ2V0RnJvbVRlbXBsYXRlID0gKHRlbXBsKSAtPlxyXG4gICAgaWYgdGVtcGw/XHJcbiAgICAgIGFjY291bnQgPSBuZXcgQWNjb3VudChcclxuICAgICAgICB0ZW1wbC5wbGFzbWFMZXZlbCxcclxuICAgICAgICB0ZW1wbC5nZW9sb2dpc3QsXHJcbiAgICAgICAgaWYgdGVtcGwucGxhbmV0cz9cclxuICAgICAgICAgIChQbGFuZXQuZ2V0RnJvbVRlbXBsYXRlKHBsYW5ldCkgZm9yIHBsYW5ldCBpbiB0ZW1wbC5wbGFuZXRzKVxyXG4gICAgICAgIGVsc2UgdW5kZWZpbmVkXHJcbiAgICAgIClcclxuICAgICAgb3V0LnN1Y2Nlc3MgXCJEYXRhIGxvYWRlZCBzdWNjZXNzZnVsbHlcIlxyXG4gICAgZWxzZVxyXG4gICAgICBhY2NvdW50ID0gbmV3IEFjY291bnQoKVxyXG4gICAgICBvdXQuZXJyb3IgXCJJbmNvcnJlY3QgZGF0YSBpbnB1dFwiXHJcbiAgICBhY2NvdW50XHJcblxyXG4gIHJldHVybiBBY2NvdW50IixudWxsXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=